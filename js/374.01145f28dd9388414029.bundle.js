(self.webpackChunksuperchat_frontend_challenge=self.webpackChunksuperchat_frontend_challenge||[]).push([[374],{2697:(e,t,r)=>{"use strict";r.d(t,{B1:()=>u,$S:()=>d,Ag:()=>s,_H:()=>l,iN:()=>p});var n=r(7757),a=r.n(n),o=r(8926),c=r.n(o),i=function(){var e=c()(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.github.com/users","/").concat(t));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Github Username ".concat(t," was not found"));case 5:return e.next=7,r.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=c()(a().mark((function e(t,r){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.github.com/repos","/").concat(t,"/").concat(r));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("We are not able to find the repository ".concat(r," for ").concat(t));case 5:return e.next=7,n.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),u=function(e,t){var r=i(e),n=s(e,t);return Promise.all([r,n])},l=function(){var e=c()(a().mark((function e(t,r){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.github.com/repos","/").concat(t,"/").concat(r,"/contributors?q=contributions&order=desc"));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("There is an issue finding contributors for the ".concat(r," repository"));case 5:return e.next=7,n.json();case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=c()(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://github-card-79ea0-default-rtdb.firebaseio.com","/githublink.json"),{method:"post",body:JSON.stringify(t)});case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=c()(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://github-card-79ea0-default-rtdb.firebaseio.com","/githublink/").concat(t,".json"),{method:"get"});case 2:return r=e.sent,n=r.json(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},7575:(e,t,r)=>{"use strict";r.d(t,{M:()=>n,y:()=>a});var n=function(e,t,r,n){return window.btoa("username=".concat(e,"&repository=").concat(t,"&color=").concat(r,"&icon=").concat(n))},a=function(e){return window.atob(e)}},8480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(7154),a=r.n(n),o=r(6479),c=r.n(o),i=r(7294),s=r(4184),u=r.n(s),l=r(6091),p=function(e){var t=e.title,r=e.variant,n=void 0===r?"primary":r,o=e.className,s=e.children,p=c()(e,["title","variant","className","children"]);return i.createElement("div",a()({className:u()(o,l.Z.CardContainer,l.Z[n]),styles:l.Z},p),t&&i.createElement("h1",{className:u()(l.Z.cardHeader)},t),s)}},4374:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(7757),a=r.n(n),o=r(8926),c=r.n(o),i=r(9713),s=r.n(i),u=r(3038),l=r.n(u),p=r(7294),d=r(2283),m=r(3727),f=r(955),h=r(8480),b=r(9973),y=r(7575),v=r(2697);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const k=function(){var e=p.useState({username:"",repository:"",color:"",icon:""}),t=l()(e,2),r=t[0],n=t[1],o=p.useState(""),i=l()(o,2),u=i[0],g=i[1],k=p.useState(),C=l()(k,2),E=C[0],x=C[1],O=(0,d.cI)(),j=O.register,Z=O.errors,S=O.handleSubmit,N=function(e,t){n(w(w({},r),{},s()({},t,e.target.value)))},P=function(){var e=c()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.B1)(r.username,r.repository).then((function(e){return e})).catch((function(e){return g(e)}));case 2:e.sent&&(t=(0,y.M)(r.username,r.repository,r.color,r.icon),(0,v.iN)(t).then((function(e){x(e)})).catch((function(e){g(e)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p.createElement(h.Z,{title:"Github profile card"},u&&p.createElement("p",{"data-testid":"error-message",className:b.Z.errorDetails},u.message),p.createElement("form",{onSubmit:S(P),className:b.Z.formContainer},p.createElement(f.SO,{id:"username",name:"username",labelText:"Username",type:"text","data-testid":"username",placeholder:"Give me a user name",defaultValue:r.username,register:j({required:!0,pattern:{value:/^([a-z\d]+-)*[a-z\d]+$/i,message:"github user is not valid!"}}),onChange:function(e){return N(e,"username")},required:!0}),Z.username&&p.createElement("p",{"data-testid":"username-error",className:b.Z.error},Z.username.message),p.createElement(f.SO,{id:"repository",name:"repository",labelText:"Repository",type:"text",placeholder:"Give me a repo!","data-testid":"repository",defaultValue:r.repository,register:j({required:!0,pattern:{value:/^[a-z]+$/i,message:"github user is not valid!"}}),onChange:function(e){return N(e,"repository")},required:!0}),Z.repository&&p.createElement("p",{"data-testid":"repo-error",className:b.Z.error},Z.repository.message),p.createElement("div",{"data-testid":"color-picker",className:b.Z.colorContainerSection},p.createElement(f.ZT,{variant:"primary"},"Pick a color"),p.createElement(f.zH,{setSelectedColor:function(e){n(w(w({},r),{},{color:e}))}})),p.createElement("div",{"data-testid":"icon-picker",className:b.Z.iconPickerContainer},p.createElement(f.ZT,{variant:"primary"},"Pick an icon"),p.createElement(f.VA,{setSelectedIcon:function(e){n(w(w({},r),{},{icon:e}))}})),p.createElement("div",{className:b.Z.formButtonContainer},p.createElement(f.zx,{disabled:!(r.username&&r.repository&&r.color&&r.icon),type:"reset","data-testid":"reset-button",onClick:function(){g(""),x("")}},E?"Make another one?":"Reset"),p.createElement(f.zx,{disabled:!(r.username&&r.repository&&r.color&&r.icon),type:"submit","data-testid":"submit-button"},"Submit"))),E&&!u&&p.createElement(m.rU,{to:"/r/".concat(E.name),className:b.Z.linkContent,"data-testid":"magic-link"},window.location.href+"r/"+E.name))}},6091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={CardContainer:"CardContainer",cardContainer:"CardContainer",primary:"primary",secondary:"secondary",cardHeader:"cardHeader"};var a=r(4783)(e.id,{locals:!0});e.hot.dispose(a)},9973:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={formContainer:"formContainer",formButtonContainer:"formButtonContainer",colorContainerSection:"colorContainerSection",iconPickerContainer:"iconPickerContainer",error:"error",errorDetails:"errorDetails",showError:"showError",linkContent:"linkContent"};var a=r(4783)(e.id,{locals:!0});e.hot.dispose(a)}}]);